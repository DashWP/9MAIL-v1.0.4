jQuery(document).ready(function(e){"use strict";for(let t in window.viWecInforIcons=[],viWecParams.infor_icons)for(let n in viWecParams.infor_icons[t])viWecInforIcons.push({icon:viWecParams.infor_icons[t][n].slug,text:viWecParams.infor_icons[t][n].text,value:`<img style="vertical-align: sub" src='${viWecParams.infor_icons[t][n].id}'>`});for(let i in window.viWecSocialIcons=[],viWecParams.social_icons)for(let r in viWecParams.social_icons[i])viWecSocialIcons.push({icon:viWecParams.social_icons[i][r].slug,text:viWecParams.social_icons[i][r].text,value:`<img style="vertical-align: sub" src='${viWecParams.social_icons[i][r].id}'>`});window.viWecRgb2hex=e=>{if(e){let t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);if(!t||4!==t.length)return e;if(3!==t.input.split(",").length)return"";{let n="#";return n+=("0"+parseInt(t[1],10).toString(16)).slice(-2),n+=("0"+parseInt(t[2],10).toString(16)).slice(-2),n+=("0"+parseInt(t[3],10).toString(16)).slice(-2)}}},window.Input={init(e){},onChange(t,n){t.data&&t.data.element&&t.data.element.trigger("propertyChange",[e(this).val(),this])},renderTemplate:(e,t)=>viWecTmpl("emtmpl-input-"+e,t),setValue(t){e("input",this.element).val(t)},render(t,n,i){if(this.element=e(this.renderTemplate(t,n)),this.events)for(let r in this.events){let a=this.events[r][0],l=this[this.events[r][1]],s=this.events[r][2];this.element.on(a,s,{element:this.element,input:this},l)}return"function"==typeof i&&i(n,this.element),this.element}},window.TextInput=e.extend({},Input,{events:[["keyup","onChange","input"],],init(t){let n=this.render("textinput",t),i,r=e(n).find(".emtmpl-quick-shortcode-list");return n.on("focusout","input",function(){i=this.selectionStart}),n.one("click",".emtmpl-quick-shortcode",()=>{r.append(viWecShortcodeListValue.map(e=>`<li>${e}</li>`))}),n.on("click",".emtmpl-quick-shortcode",function(){e(".emtmpl-quick-shortcode-list").not(r).hide(),r.toggle()}),n.on("click","li",function(){let t=e(this).text(),r=n.find("input").val(),a;i||(i=r.length);let l=r.substr(0,i),s=r.substr(i);a=l+t+s,n.find("input").val(a).keyup(),i+=t.length}),n}}),window.TextareaInput=e.extend({},Input,{events:[["keyup","onChange","textarea"],],setValue(t){e("textarea",this.element).val(t)},init(e){return this.render("textareainput",e)}}),window.CheckboxInput=e.extend({},Input,{onChange(e,t){e.data&&e.data.element&&e.data.element.trigger("propertyChange",[this.checked,this])},setValue(t){"true"===t&&e("input",this.element).prop("checked",!0)},events:[["change","onChange","input"],],init(e){return this.render("checkboxinput",e)}}),window.SelectInput=e.extend({},Input,{events:[["change","onChange","select"],],setValue(t){e("select",this.element).val(t)},init(e){return this.render("select",e)}}),window.SelectGroupInput=e.extend({},Input,{events:[["change","onChange","select"],],setValue(t){e("select",this.element).val(t)},init(e){return this.render("select-group",e)}}),window.Select2Input=e.extend({},Input,{events:[["change","onChange","select"],],setValue(t){t=t.split(","),e("select",this.element).val(t)},init(e){return this.render("select2",e)}}),window.LinkInput=e.extend({},TextInput,{events:[["change","onChange","input"],],init(e){return this.render("textinput",e)}}),window.RangeInput=e.extend({},Input,{events:[["change","onChange","input"],],init(e){return this.render("rangeinput",e)},setValue(t){e("input",this.element).val(parseInt(t))}}),window.NumberInput=e.extend({},Input,{events:[["change keyup","onChange","input"],],init(e){return this.render("numberinput",e)},setValue(t){e("input",this.element).val(parseInt(t))},onChange(t){let n=t.target.max&&parseInt(this.value)>=parseInt(t.target.max)?parseInt(t.target.max):this.value;e(t.target).val(n),t.data&&t.data.element&&t.data.element.trigger("propertyChange",[n,this])}}),window.DateInput=e.extend({},Input,{events:[["change keyup","onChange","input"],],init(e){return this.render("dateinput",e)}}),window.CssUnitInput=e.extend({},Input,{number:0,unit:"px",events:[["change","onChange","select"],["change keyup mouseup","onChange","input"],],onChange(t){if(t.data&&t.data.element){let n=t.data.input;""!=this.value&&(n[this.name]=this.value),""==n.unit&&(n.unit="px");let i="";"auto"==n.unit?(e(t.data.element).addClass("auto"),i=n.unit):(e(t.data.element).removeClass("auto"),i=n.number+n.unit),t.data.element.trigger("propertyChange",[i,this])}},setValue(t){this.number=parseInt(t),this.unit=t.replace(this.number,""),"auto"==this.unit&&e(this.element).addClass("auto"),e("input",this.element).val(this.number),e("select",this.element).val(this.unit)},init(e){return this.render("cssunitinput",e)}}),window.ColorInput=e.extend({},Input,{events:[["change","onChange","input"],],setValue(t){e("input",this.element).val(viWecRgb2hex(t)),e(".emtmpl-color-picker",this.element).css("background-color",viWecRgb2hex(t))},init(t){let n=this.render("colorinput",t,function(t,n){e(".emtmpl-clear",n).on("click",function(){e(".emtmpl-color-picker",n).css("background-color","transparent").val("").change()})});return e(".emtmpl-color-picker",n).iris({change(t,n){e(this).val(n.color.toString()).trigger("change"),e(this).css("background-color",n.color.toString())}}).on("click",function(t){let i=e("#emtmpl-control-panel"),r=n.offset().left-i.offset().left>100?0:"",a=(n.offset().top-i.offset().top)/window.innerHeight>.6?"32px":"";e(".iris-picker").hide(),n.find(".iris-picker").css({right:r,bottom:a}).show()}),e("body").on("click",function(t){e(t.target).is(".emtmpl-color-picker, .iris-picker, .iris-picker-inner, .iris-square")||e(".iris-picker").hide()}),n},onChange(e,t){if(e.data&&e.data.element){let n=this.value?this.value:"transparent";e.data.element.trigger("propertyChange",[n,this])}}}),window.TextEditor=e.extend({},Input,{events:[["change","onChange","textarea"],],setValue(t){e("textarea",this.element).val(t)},onChange(t,n){if(t.data&&t.data.element){let i=e(this).val(),r=tinymce.get("emtmpl-text-editor");r.isHidden()&&(i=r.setContent(i)),t.data.element.trigger("propertyChange",[i,this])}},init(t){return e(tinyMCE.editors).each(function(){tinyMCE.remove(this)}),this.render("texteditorinput",t)},subInit(t){wp.editor.initialize("emtmpl-text-editor",{tinymce:{mode:"exact",selector:"#emtmpl-text-editor",content_style:"body {background:#eeeeee; font-family: helvetica, arial, sans-serif;} #tinymce a{text-decoration: none;} p{margin:0;}",theme:"modern",height:"auto",menubar:!1,statusbar:!1,relative_urls:!1,remove_script_host:!1,convert_urls:!1,plugins:["link textcolor colorpicker image"],toolbar:["bold italic underline | alignleft aligncenter alignright alignjustify| link image","fontsizeselect forecolor backcolor","viWecInforIcons viWecSocialIcons shortcode fontselect"],invalid_elements:"script",fontsize_formats:"10px 11px 12px 13px 14px 15px 16px 17px 18px 19px 20px 22px 24px 26px 28px 30px 35px 40px 50px 60px",setup:function(t){let n=viWecShortcodeListValue.map(e=>({text:e,value:e}));t.addButton("shortcode",{type:"listbox",text:"Shortcode",icon:!1,onselect:function(e){t.insertContent(this.value())},values:n}),t.addButton("viWecInforIcons",{type:"listbox",text:"Information icons",icon:!1,onselect:function(e){t.insertContent(this.value())},values:viWecInforIcons}),t.addButton("viWecSocialIcons",{type:"listbox",text:"Social icons",icon:!1,onselect:function(e){t.insertContent(this.value())},values:viWecSocialIcons}),t.on("keyup mouseup change",function(n){e("#emtmpl-text-editor").val(t.getContent()).change()})}},quicktags:!0}),t.on("keyup",function(){e("iframe").contents().find('#tinymce[data-id="emtmpl-text-editor"]').html(e(this).html())})}}),window.BgImgInput=e.extend({},Input,{events:[["click","onChange","button"],["click","clear",".emtmpl-clear"]],init(e){return this.render("bgimginput",e)},onChange(e,t){if(e.data&&e.data.element){let n=wp.media({title:"Select Image",multiple:!1}).open().on("select",function(t){let i=n.state().get("selection").first().toJSON();e.data.element.trigger("propertyChange",[`url(${i.url})`,this])})}},clear(e,t){e.data.element.trigger("propertyChange",["url()",this])}}),window.ImgInput=e.extend({},Input,{events:[["click","onChange","button"],["click","clear",".emtmpl-clear"]],init(e){return this.render("bgimginput",e)},onChange(e,t){if(e.data&&e.data.element){let n=wp.media({title:"Select Image",multiple:!1}).open().on("select",function(t){let i=n.state().get("selection").first().toJSON();e.data.element.trigger("propertyChange",[i.url,this])})}},clear(e,t){e.data.element.trigger("propertyChange",["",this])}}),window.FileUploadInput=e.extend({},TextInput,{events:[["blur","onChange","input"],],init(e){return this.render("textinput",e)}}),window.RadioInput=e.extend({},Input,{onChange(e,t){e.data&&e.data.element&&e.data.element.trigger("propertyChange",[this.value,this])},events:[["change","onChange","input"],],setValue(t){e("input",this.element).removeAttr("checked"),t&&e("input[value="+t+"]",this.element).attr("checked","true").prop("checked",!0)},init(e){return this.render("radioinput",e)}}),window.RadioButtonInput=e.extend({},RadioInput,{events:[["change","onChange","input"],],init(e){return this.render("radiobuttoninput",e)}}),window.ToggleInput=e.extend({},TextInput,{onChange(e,t){e.data&&e.data.element&&e.data.element.trigger("propertyChange",[this.checked?this.getAttribute("data-value-on"):this.getAttribute("data-value-off"),this])},events:[["change","onChange","input"],],init(e){return this.render("toggle",e)}}),window.ValueTextInput=e.extend({},TextInput,{events:[["blur","onChange","input"],],init(e){return this.render("textinput",e)}}),window.GridLayoutInput=e.extend({},TextInput,{events:[["blur","onChange","input"],],init(e){return this.render("textinput",e)}}),window.ProductsInput=e.extend({},TextInput,{events:[["blur","onChange","input"],],init(e){return this.render("textinput",e)}}),window.GridInput=e.extend({},Input,{events:[["change","onChange","select"],["click","onChange","button"],],setValue(t){e("select",this.element).val(t)},init(e){return this.render("grid",e)}}),window.TextValueInput=e.extend({},Input,{events:[["blur","onChange","input"],["click","onChange","button"],],init(e){return this.render("textvalue",e)}}),window.ButtonInput=e.extend({},Input,{events:[["click","onChange","button"],],setValue(t){e("button",this.element).val(t)},init(e){return this.render("button",e)}}),window.SectionInput=e.extend({},Input,{events:[["click","onChange","button"],],setValue:e=>!1,init(e){return this.render("sectioninput",e)}}),window.ListInput=e.extend({},Input,{events:[["change","onChange","select"],],setValue(t){e("select",this.element).val(t)},init(e){return this.render("listinput",e)}}),window.AutocompleteInput=e.extend({},Input,{events:[["autocomplete.change","onAutocompleteChange","input"],],onAutocompleteChange(e,t,n){e.data&&e.data.element&&e.data.element.trigger("propertyChange",[t,this])},init(t){return this.element=this.render("textinput",t),e("input",this.element).autocomplete(t.url),this.element}}),window.AutocompleteList=e.extend({},Input,{events:[["autocompletelist.change","onAutocompleteChange","input"],],onAutocompleteChange(e,t,n){e.data&&e.data.element&&e.data.element.trigger("propertyChange",[t,this])},setValue(t){e("input",this.element).data("autocompleteList").setValue(t)},init(t){return this.element=this.render("textinput",t),e("input",this.element).autocompleteList(t),this.element}})});