jQuery(document).ready(function(t){"use strict";t(".villatheme-get-key-button").one("click",function(a){let e=t(this);e.addClass("loading");let d=e.data(),o=d.id,n=d.href,l=window.location.hostname;l=l.toLowerCase();let i;a.preventDefault(),e.attr("data-download"),i=window.open(n,"myWindow","width=380,height=600"),window.addEventListener("message",function(a){let d=t.parseJSON(a.data),n="",i=d.message,s="",r="";if(d.data.length>0){for(let u=0;u<d.data.length;u++)if(d.data[u].id===o&&(d.data[u].domain===l||""===d.data[u].domain||null==d.data[u].domain)&&(""==n?(n=d.data[u].download_key,s=d.data[u].support_until):s<d.data[u].support_until&&(n=d.data[u].download_key,s=d.data[u].support_until),d.data[u].domain===l)){n=d.data[u].download_key;break}n&&(r=1,t(".villatheme-autoupdate-key-field").val(n))}e.removeClass("loading"),r?(t("<p><strong>"+i+"</strong></p>").insertAfter(".villatheme-autoupdate-key-field"),t(e).closest("form").submit()):t("<p><strong> Your key is not found. Please contact support@villatheme.com </strong></p>").insertAfter(".villatheme-autoupdate-key-field")})})});